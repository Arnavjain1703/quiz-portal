{% extends 'admin/base_for_admin.html' %}
{% load static %}

{% block title %}
    Show Result 
{% endblock %}


{% block content %}
    <form method="post">
        {% csrf_token %}
        <button type="submit">Download Result as PDF</button>
    </form><br>

    {{ test.test_name }}<br>

    {{ cand.name }}<br>
    {{ cand.father_name }}<br>
    {{ cand.email }}<br>
    {{ cand.phone_number }}<br>
    <table>
        <tr>
            <td>Subject</td>
            <td>Total questions</td>
            <td>Answered correctly</td>
            <td>Percentage</td>
        </tr>
        {% for i in l %}
            <tr>
                {% for j in i %}
                    <td>{{ j }}</td>
                {% empty %}
                    <p>Nothing for this section</p>
                {% endfor %}
            </tr>
        {% empty %}
            <p>Nothing attempted</p>> 
        {% endfor %}
        </tr>
    </table>


    {% for select in selects %}
        {% if select.question_text.correct_choice == select.selected_choice %}
            <ol>
                <div style="display: flex;">
                    <p>Q. &nbsp;</p>
                    <p>{{ select.question_text|safe|escape }}</p>
                </div>
                <li>{{ select.question_text.choice1|safe|escape }}</li>
                {% if select.selected_choice == 1 %}
                    <P>#</P>
                {% endif %}
                <li>{{ select.question_text.choice2|safe|escape }}</li>
                {% if select.selected_choice == 2 %}
                    <P>#</P>
                {% endif %}
                <li>{{ select.question_text.choice3|safe|escape }}</li>
                {% if select.selected_choice == 3 %}
                    <P>#</P>
                {% endif %}
                <li>{{ select.question_text.choice4|safe|escape }}</li>
                {% if select.selected_choice == 4 %}
                    <P>#</P>
                {% endif %}
                <p>Correct choice  -   {{ select.question_text.correct_choice }}</p>
            </ol>
        {% else %}
            <ol>
                <div style="display: flex;">
                    <p>Q. &nbsp;</p>
                    <p>{{ select.question_text|safe|escape }}</p>
                </div>
                <li>{{ select.question_text.choice1|safe|escape }}</li>
                {% if select.selected_choice == 1 %}
                    <P>---#</P>
                {% endif %}
                <li>{{ select.question_text.choice2|safe|escape }}</li>
                {% if select.selected_choice == 2 %}
                    <P>---#</P>
                {% endif %}
                <li>{{ select.question_text.choice3|safe|escape }}</li>
                {% if select.selected_choice == 3 %}
                    <P>---#</P>
                {% endif %}
                <li>{{ select.question_text.choice4|safe|escape }}</li>
                {% if select.selected_choice == 4 %}
                    <P>---#</P>
                {% endif %}
                <p>Correct choice  -  {{ select.question_text.correct_choice }}</p>
            </ol>
        {% endif %}
    {% empty %}
        <p>No questions attempted.</p>
    {% endfor %}
{% endblock %}